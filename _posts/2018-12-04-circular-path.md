---
title: (공사중) 임의의 원형 경로 만들기
---

도입
----

2주 전, 사각형 Grid 에서 임의의 겹치지 않는 원형 경로를 구해야 하는 업무가 생겼습니다. 요구 조건은 다음과 같았습니다.

- 순환 경로 (처음 == 끝)
- 중복되지 않는 깨끗한 1픽셀의 line으로 이어질 것 (가급적 상하좌우로만)
- 약간의 랜덤성

문제 정의에 따라서 [A\*](<https://en.wikipedia.org/wiki/A*_search_algorithm>) 같은 탐색 알고리즘을 써서 구할 수도 있겠습니다만, 이때는 좀 쉽고 procedural 한 방법으로 풀어보고 싶다는 생각이 들었습니다. 고민 끝에 만든 방법은 다음과 같습니다.

1. 랜덤한 원형 영역 구하기
2. Cellular Automata 를 통해 영역 가장자리를 깨끗하게 만들기
3. 외곽선만 남긴 후 시작점과 끝점을 select 하고, DFS 로 경로 찾기

완성된 경로는 다음과 같습니다. (파란색=시작점)
<s>GIF 가 잘 올라가네요. 휴 다행이다...</s>

![](<../images/circular_path_0.gif>)

그럼 하나씩 분석해 보겠습니다.


랜덤한 원형 영역 구하기
---------------------

위의 gif 파일을 보시면 알 수 있듯이 경로는 전체적으로 원형이지만 완벽한 원은 아닙니다. 약간 deform 된 원을 어떻게 표현할까 고민하다가 아주 옛날(10년 전쯤?)에 봤던 flash 가 하나 떠올랐습니다. 원주율($\pi$) 값을 알아내기 위해서 몬테카를로 방식을 이용해서 사분원에 점을 찍어보는 것입니다. 이 때 원의 반지름을 r 이라고 할 때, 사분원 안에 들어간 점의 개수 $\div$ 전체 점의 개수를 계산하면 $\pi$ 값을 구할 수 있습니다.

$$
\frac{사분원 안에 들어간 점의 개수}{전체 점의 개수} \fallingdotseq \frac{r \times r \times \pi \div 4}{r \times r} = \frac{\pi}{4}
$$


Cellular Automata 를 통해 영역 가장자리를 깨끗하게 만들기
------------------------------------------------------



외곽선만 남긴 후 시작점과 끝점을 select 하고, DFS 로 경로 찾기
----------------------------------------------------------
